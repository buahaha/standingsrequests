{% extends "allianceauth/base.html" %}
{% load bootstrap %}
{% load staticfiles %}
{% load i18n %}

{% block title %}Alliance Auth - Standings Tool {% endblock %}

{% block page_title %}Request Standings{% endblock page_title %}
{% block extra_css %}

{% endblock extra_css %}

{% block content %}
    {% include 'standingsrequests/partials/_menu.html' %}
    <div class="col-lg-12">
        <h1 class="page-header">{% trans "Your Characters" %}</h1>

        <div id="div_request_characters">
            <img class="center-block" src="{% static "standingsrequests/Spinner-1s-200px.svg" %}" alt="Spinner"/>
        </div>
    </div>

    {% if corporations_enabled %}
        <div class="col-lg-12">
            <h1 class="page-header">{% trans "Your Corporations" %}</h1>

            <div id="div_request_corporations">
                <img class="center-block" src="{% static "standingsrequests/Spinner-1s-200px.svg" %}" alt="Spinner"/>
            </div>
        </div>
    {% endif %}
    
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans "Icon Legend" %}
            </div>
            <div class="panel-body">
                <table class="table">
                    <tr>
                        <td>
                            <i class="fa fa-star fa-fw" title="{% trans "In Organisation" %}" style="color:#042177;"></i>
                        </td>
                        <td>
                            {% blocktrans %}
                                Character is in this organisation.
                            {% endblocktrans %}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fa fa-exclamation-triangle fa-fw grayiconecolor"
                                                   title="{% trans "No Standing" %}"></i>
                        </td>
                        <td>
                            {% blocktrans %}
                                The character has no standings from this organisation towards it.
                            {% endblocktrans %}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fa fa-sliders fa-fw" title="{% trans "Standing Pending" %}"></i>
                        </td>
                        <td>
                            {% blocktrans %}
                                The standing has been requested and is pending action by a Standings Manager.
                            {% endblocktrans %}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fa fa-sliders fa-fw" title="{% trans "Actioned, pending API pull." %}"
                                                                               style="color:#00ba32;"></i>
                        </td>
                        <td>
                            {% blocktrans %}
                                The standing has been actioned by a Standings Manager but is waiting for API verification.
                            {% endblocktrans %}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <i class="fa fa-reply-all fa-fw" title="{% trans "Standing Revoked" %}" style="color:#e81341;"></i>
                        </td>
                        <td>
                            {% blocktrans %}
                                The standing has been revoked by a Standings Manager or automatically if you no longer meet the requirements permitting blue standings access.
                            {% endblocktrans %}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

{% endblock content %}

{% block extra_script %}
    $(function() {
        /* async load request_characters view into div or show HTTP errors if any */
        $("#div_request_characters").load(
            "{% url 'standingsrequests:request_characters' %}", 
            function(responseTxt, statusTxt, xhr){                
                if(statusTxt == "error"){
                    $("#div_request_characters").html(
                        '<p class="text-danger">Error: ' + xhr.status + ': ' + xhr.statusText + '</p>'
                    );
                }
        });
        /* async load request_corporations view into div or show HTTP errors if any */
        $("#div_request_corporations").load(
            "{% url 'standingsrequests:request_corporations' %}", 
            function(responseTxt, statusTxt, xhr){                
                if(statusTxt == "error"){
                    $("#div_request_corporations").html(
                        '<p class="text-danger">Error: ' + xhr.status + ': ' + xhr.statusText + '</p>'
                    );
                }
        });
    });
{% endblock extra_script %}
